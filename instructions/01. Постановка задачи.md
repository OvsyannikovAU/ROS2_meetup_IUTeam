Работы проводились в рамках [хакатона по сборке мобильного робота на ROS2](https://ros-event.timepad.ru/event/3197948/).
Задачи хакатона:
- разработка доступных финансово и простых для применения в школах аппаратных решений, пригодных для изучения робототехники и ROS;
- разработка инструкций и учебных материалов по "быстрому старту" с ROS2.

Имевшееся оборудование:
- Мобильный робот VoltBro;
- Мобильный робот Hiwander JetRover;
- одноплатный компьютер Raspberry Pi 4;
- платы микроконтроллеров Raspberry Pi pico первой и второй версий;
- самодельная платформа с кинематикой дифференциальной тележки;
- лидар, IMU, лазерные дальномеры, датчики.

Программная архитектура ROS2 имеет одну из двух приведенных ниже схем (схемы предоставлены организаторами хакатона во вводной презентации):
**![](https://lh7-rt.googleusercontent.com/slidesz/AGV_vUcoAVIytLPKofpeCpeX7P9V5nr0kjEgQdoTS5FuN-Ttq_UVG9zZ7XiT1wB4zwiyyuAcBXs_yg2pZGM191b5jWZVxCv3sZ5SyDahIxtGod9YkHDKnqesHaYtCqSNedd9boKrEK3n9YtJjA8hSVo9p18=s2048?key=7Cdodk3cBc0eZoZerTzxRc-c)**

Так как [[00. Команда|команда]] состояла из людей, почти не имевших опыта создания роботов на ROS2, приходилось выбирать более простой вариант с установкой на микроконтроллер microROS и доработкой его под свои минимальные нужды.

Общая архитектура системы на ROS (предоставлена организаторами хакатона во вводной презентации):
**![](https://lh7-rt.googleusercontent.com/slidesz/AGV_vUfzMOXJocBRFh6abWve8BBO9RNzJggp2zjzYs93ptuVOqE4Qt2GJmMTU7CnMgxPE7FqLA7VxNb2yyNAgduL9qITcZNNT7y_OgA6ERwpd4Sob7Ax68SETI5Hh2pS4pINk7p_Prhtt7EmSAweho9n2g=s2048?key=7Cdodk3cBc0eZoZerTzxRc-c)**

Так как в задачах хакатона ставилась разработка и документирование собственного робота, командой было принято решение использовать следующие элементы:
- одноплатный компьютер Raspberry Pi 4 с установленной на него операционной системой Ubuntu и фреймворком ROS2 для решения задач высокого уровня (навигации, компьютерного зрения, формирования стратегии поведения робота);
- веб-камера и лидар, подключенные к одноплатному компьютеру;
- плата микроконтроллера Paspberry Pi Pico с установленной прошивкой micro ROS (рассчитывали использовать вторую версию платы, но в условиях ограниченного времени успели запустить micro ROS только на первой версии платы);
- два ДПТ с датчиками положения (инкрементальными энкодерами), датчик IMU ..., лазерные дальномеры ...., подключенные к микроконтроллеру;
- общение одноплатного компьютера и микроконтроллера реализовано по USB по виртуальному UART.

В результате перед командой встали следующие задачи:
- сборка мобильного робота с кинематикой дифференциальной тележки, установка на него датчиков, микроконтроллера, одноплатного компьютера;
- [[02. Установка micro ROS на Raspberry Pi Pico| установка на плату микроконтроллера pi pico 1/2 прошивки microROS]];
- [[03. Установка ROS2 на одноплатный компьютер Raspberry Pi| установка на одноплатный компьютер RPi 4 операционной системы Ubuntu и фреймворка ROS2]];
- [[04. Установка ROS2 на десктоп| установка операционной системы Ubuntu и фреймворка ROS2 на десктопный компьютер]] для тестирования и отладки работы с microROS, дальнейшего решения задач;
- проверка работоспособности всей системы, связи всех элементов;
- доработка прошивки microROS на ЯП C/C++ под своего робота: с учетом распиновки, функций и периферии;
- запуск [[06. Настройка лидара|лидара]] и [[07. Настройка IMU|IMU]] на RPi 4 (ради упрощения и ускорения настройки IMU решено подключать не к микроконтроллеру, а к компьютеру);
- решение завершающей хакатон задачи по навигации мобильного робота в лабиринте или ином полигоне.